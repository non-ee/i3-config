#################################
#            Shadows            #
#################################
# Enables client-side shadows on windows.
# Default: false
shadow = true;

# Blur radius for shadows, in pixels.
# Default: 12
shadow-radius = 14;

# Horizontal offset for shadows, in pixels.
# Default: -15
shadow-offset-x = -7;

# Vertical offset for shadows, in pixels.
# Default: -15
shadow-offset-y = -7;

# Example if you want custom shadow opacity:
shadow-opacity = 0.5

#################################
#             Fading            #
#################################
# Fade windows in/out on open/close and opacity changes.
# Default: false
fading = true;

# Opacity increase per step while fading in.
# Range: 0.01 - 1.0, default: 0.028
fade-in-step = 0.03;

# Opacity decrease per step while fading out.
# Range: 0.01 - 1.0, default: 0.03
fade-out-step = 0.03;

# If needed, time between fade steps in ms (default 10):
fade-delta = 3


#################################
#   Transparency / Opacity      #
#################################
# Opacity of window titlebars/borders, range 0.1 - 1.0
# Default: 1.0
frame-opacity = 1.0;


#################################
#           Corners             #
#################################
# Radius for rounded corners, default 0 (disabled)
corner-radius = 12;

#################################
#            Blur               #
#################################
# Kernel for background blur if used. e.g., "3x3box"
blur-method = "gaussian";
blur-size = 10;
blur-deviation = 8.0;

#################################
#       General Settings        #
#################################
# Backend: "xrender", "glx", or "egl".
# Default: "xrender"
backend = "glx";

# Use higher-precision rendering and dithering.
# Reduces banding, might cost performance. Only for GLX/EGL.
dithered-present = false;

# Enable VSync.
# Default: false
vsync = true;

# Attempt to detect windows with rounded corners.
# Default: false
detect-rounded-corners = true;

# Detect _NET_WM_WINDOW_OPACITY on client windows.
# Default: false
detect-client-opacity = true;

# Use WM_TRANSIENT_FOR to group windows for focus.
# Default: false
detect-transient = true;

# Redraw only changed parts of the screen (improves performance).
# Default: false
use-damage = true;


#################################
#           Animations          #
#################################
animations = (
  {
    triggers = ["close"];
    preset = "fly-out";
    direction = "down";
    duration = 0.2;
  },
  {
    triggers = ["open"];
    preset = "fly-in";
    direction = "up";
    duration = 0.4;
  },
  {
    triggers = ["workspace-in"];
    preset = "fly-in";
    direction = "up";
    duration = 0.4;
  }
);


#################################
#       Rule-based Options      #
#################################
# 'rules' can be specified as rules: (...) or rules = (...),
# depending on your picom version.

rules: (
  ##########################################
  # Basic examples from your config
  ##########################################
  {
    match = "window_type = 'tooltip'";
    fade = false;
    shadow = true;
    opacity = 0.75;
    corner-radius = 0;
  },
  {
    match = "window_type = 'dock' || "
            "window_type = 'desktop' || "
            "_GTK_FRAME_EXTENTS@";
    blur-background = false;
  },
  {
    match = "window_type != 'dock'";
    # Example: if you want a custom shader, uncomment:
    # shader = "my_shader.frag";
  },
  {
    match = "window_type = 'dock' || window_type = 'desktop'";
    corner-radius = 0;
  },

  ##########################################
  #  Original shadow-exclude / fade-exclude / opacity-rule expansions
  #  Each match that sets shadow=false is effectively "shadow-exclude".
  #  If needed, fade=false is also "fade-exclude".
  ##########################################
  {
    match = "! name~=''";
    shadow = false;
  },
  {
    match = "window_type = 'notification'";
    shadow = true;
    corner-radius = 10;
  },
  # Opacity rules
  {
    match = "class_g = 'copyq'";
    opacity = 0.80;
  },
  # Additional
  {
    match = "window_type *= 'menu'";
    shadow = false;
  },
  {
    match = "class_g = 'i3-frame'";
    corner-radius = 6;
  },
  {
    match = "fullscreen";
    corner-radius = 0;
  },

  ##########################################
  #  Geometry animation rule
  ##########################################
  {
    match = "MANUAL@ != 1";
    animations = ({
      triggers = ["geometry"];
      preset = "geometry-change";
      duration = 0.26;
    });
  },
  {
    match = "class_g = 'Rofi' || window_type *= 'menu'";
    animations = (
    {
      triggers = ["open", "show"];
      preset = "slide-in";
      direction = "up";
    },
    {
      triggers = ["close", "hide"];
      preset = "slide-out";
      direction = "up";
    });
  },
  {
    match = "window_type = 'tooltip'";
    animations = (
    {
      triggers = ["open", "show"];
      preset = "slide-in";
      direction = "left";
    },
    {
      triggers = ["close", "hide"];
      preset = "slide-out";
      direction = "left";
    });
  }
)
